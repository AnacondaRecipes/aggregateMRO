{% set version = '4.0.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-bcp
  version: {{ version|replace("-", "_") }}

source:
  fn: bcp_{{ version }}.tar.gz   # [linux or win32]
  url:  # [linux or win32]
    - {{ cran_mirror }}/src/contrib/bcp_{{ version }}.tar.gz  # [linux or win32]
    - {{ cran_mirror }}/src/contrib/Archive/bcp/bcp_{{ version }}.tar.gz  # [linux or win32]
  sha256: eb693aecf9b84d8a663bbe1e2bf3911f0914b5543dbbbe4aa198ffa9a77d87b3  # [linux or win32]

  url: https://mran.microsoft.com/snapshot/2018-04-23/bin/windows/contrib/3.5/bcp_4.0.1.zip  # [win64]
  sha256: 49a496afa297de11ace626433d0c94d3347fe9bfb2e9dd0fb922014eafb5d24b  # [win64]

  url: https://mran.microsoft.com/snapshot/2018-04-23/bin/macosx/el-capitan/contrib/3.5/bcp_4.0.1.tgz  # [osx]
  sha256: 4afe949c41d6432cec770d0ee0a1ea639c0a5cb723bb637b4c7374111aaac6aa  # [osx]

build:
  merge_build_host: True  # [linux or win32]
  # If this is a new build for the same version, increment the build number.
  number: 0

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: DNAcopy, coda, strucchange, vegan, ggplot2, igraph
requirements:
  build:
    - {{ compiler('c') }}        # [linux]
    - {{ compiler('cxx') }}      # [linux]
    - {{native}}toolchain        # [win32]
    - {{posix}}filesystem        # [win32]
    - {{posix}}make              # [linux or win32]

  host:
    - mro-base
    - r-rcpp >=0.9.2
    - r-rcpparmadillo

  run:
    - mro-base
    - {{native}}gcc-libs         # [win32]
    - r-rcpp >=0.9.2
    - r-rcpparmadillo

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('bcp')"           # [not win]
    - "\"%R%\" -e \"library('bcp')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=bcp
  license: GPL (>= 2)
  summary: Provides an implementation of the Barry and Hartigan (1993) product partition model
    for the normal errors change point problem using Markov Chain Monte Carlo. It also
    extends the methodology to regression models on a connected graph (Wang and Emerson,
    2015); this allows estimation of change point models with multivariate responses.
    Parallel MCMC, previously available in bcp v.3.0.0, is currently not implemented.
  license_family: GPL3

extra:
  recipe-maintainers:
    - mingwandroid

# The original CRAN metadata for this package was:

# Package: bcp
# Type: Package
# Title: Bayesian Analysis of Change Point Problems
# Version: 4.0.1
# Date: 2018-04-07
# Author: Xiaofei Wang, Chandra Erdman, and John W. Emerson
# Maintainer: Xiaofei Wang <xiaofei.wang@yale.edu>
# Depends: graphics, methods, grid
# Suggests: DNAcopy, coda, strucchange, vegan, ggplot2, igraph
# Description: Provides an implementation of the Barry and Hartigan (1993) product partition model for the normal errors change point problem using Markov Chain Monte Carlo. It also extends the methodology to regression models on a connected graph (Wang and Emerson, 2015); this allows estimation of change point models with multivariate responses. Parallel MCMC, previously available in bcp v.3.0.0, is currently not implemented.
# License: GPL (>= 2)
# Imports: Rcpp (>= 0.9.2)
# LinkingTo: Rcpp, RcppArmadillo
# NeedsCompilation: yes
# Repository: CRAN
# RoxygenNote: 6.0.1
# Packaged: 2018-04-07 20:48:07 UTC; eastie
# Date/Publication: 2018-04-11 07:05:27 UTC

# See
# http://docs.continuum.io/conda/build.html for
# more information about meta.yaml
